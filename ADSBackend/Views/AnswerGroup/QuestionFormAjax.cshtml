@model Scholarships.Models.Forms.QuestionSet

@using Scholarships.Models.Forms

@{
    Layout = null;
}

<form asp-action="Save">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    @foreach (var answerset in Model.AnswerSets)
    {
        <input type="hidden" name="[@answerset.Index].AnswerSetId" value="@answerset.AnswerSetId" />

        @for (int i = 0; i < Model.Questions.Count; i++)
        {
            var question = Model.Questions[i];

            // Do we have an answer to this question?
            question.Answer = answerset.Answers.FirstOrDefault(a => a.QuestionId == question.QuestionId);
            question.Index = i;
            question.AnswerSetIndex = @answerset.Index;

            <input type="hidden" name="[@answerset.Index].Answers[@question.Index].QuestionId" value="@question.QuestionId" />

            @await Html.PartialAsync("_" + question.Type.ToString() + "Partial", question);  // Ex. "_ShortAnswerPartial"
        }


    }
    <input type="submit" value="Save"/>
</form>


